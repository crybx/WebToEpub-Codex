@media (prefers-color-scheme: dark) {
    body {
        background: #2f2f2f;
        color: #eee;
    }

    input, select, progress, textarea {
        background: #2b2b2b;
        color: #eee;
    }

    button {
        background: #1e1e1e !important;
        color: #eee !important;
        border: 1px solid #555 !important;
    }

    button:hover {
        background: #262626 !important;
        color: #fff !important;
    }

    /* Sidebar dark mode styling */
    .sidebar {
        background-color: rgb(40, 40, 40) !important;
        color: #eee !important;
        box-shadow: -4px 0 8px rgba(0, 0, 0, 0.4) !important;
    }

    /* Sidebar item hover effects for auto dark mode */
    .sidebar tr label:hover {
        background-color: rgba(135, 206, 250, 0.15) !important;
    }

    /* Error state styling for dark mode */
    .error-state .more-actions-menu .menu-item:hover svg,
    .error-state .header-more-actions-menu .menu-item:hover svg,
    .error-state .lib-more-actions-menu .menu-item:hover svg {
        fill: #f27070 !important;
    }

    .error-state .more-actions-menu .menu-item:hover,
    .error-state .header-more-actions-menu .menu-item:hover,
    .error-state .lib-more-actions-menu .menu-item:hover {
        background-color: rgba(242, 112, 112, 0.15) !important;
    }

    .error-state .more-actions-menu .menu-item:hover span,
    .error-state .header-more-actions-menu .menu-item:hover span,
    .error-state .lib-more-actions-menu .menu-item:hover span {
        color: #f27070 !important;
    }

    /* CSS Variables for auto dark mode */
    :root {
        --header-bg: #3a3a3a;
        --row-hover-bg: #3a3a3a;
        --icon-color: #b0b0b0;
        --icon-color-dark: #999999;
        --modal-bg: #2f2f2f;
        --modal-title-bg: #3a3a3a;
        --modal-title-text: #eee;
        --modal-border: #555;
        --modal-close-color: #b0b0b0;
        --border-color: #555;
        --border-light: #444;
        --input-border: #555;
        --button-border: #555;
        --sidebar-bg: rgb(40, 40, 40);
        --sidebar-text: #eee;
        --scrollbar-track: rgba(58, 58, 58, 0.3);
        --scrollbar-thumb: #666;
        --scrollbar-thumb-hover: #777;
        --scrollbar-border: rgba(85, 85, 85, 0.3);
    }

    /* Lighter icon effects for auto dark mode */
    .clickable-icon:hover {
        background-color: rgba(135, 206, 250, 0.15) !important;
    }

    .clickable-icon:hover > svg,
    .clickable-icon:hover > span > svg {
        fill: #87ceeb !important;
    }

    .clickable-icon:active > svg,
    .clickable-icon:active > span > svg {
        fill: #87ceeb !important;
    }

    /* Override modal close button colors */
    .modal-close:hover {
        color: #87ceeb !important;
        background: rgba(135, 206, 250, 0.15) !important;
    }

    .modal-close:active {
        color: #87ceeb !important;
        background: rgba(135, 206, 250, 0.2) !important;
    }

    /* Override default icon colors in auto dark mode */
    .bi-eye-fill,
    .downloading-icon {
        color: #87ceeb;
    }

    .sleeping-icon {
        color: #d4a574;
    }

    /* Checkbox accent colors for auto dark mode */
    input[type=checkbox] {
        accent-color: #87ceeb;
    }

    .error-state input[type=checkbox] {
        accent-color: #f27070 !important;
    }

    input[type=checkbox].greenBox {
        accent-color: #90ee90 !important;
    }

    .sidebar input.exclude {
        accent-color: #f27070 !important;
    }

    /* Library UI dark mode styling */
    .new-chapter-badge {
        color: #90ee90 !important; /* Light green for good contrast on dark backgrounds */
    }

    .warning-text {
        color: #ffff99 !important; /* Light yellow for better dark mode contrast */
    }
}
